<!doctype html>
<head><meta charset="utf8">
<title>Int64 strawman</title>
<link rel="stylesheet" href="https://bterlson.github.io/ecmarkup/elements.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
</head><body><emu-biblio href="./biblio.json"></emu-biblio>
<h1>Int64 strawman</h1>
<div><h2>Table of Contents</h2><ol class="toc"><li><a href="#intro"><span class="secnum"></span> Introduction</a></li><li><a href="#types"><span class="secnum">1</span> ECMAScript Data Types and Values (6)</a><ol class="toc"><li><a href="#all-types"><span class="secnum">1.1</span> ECMAScript language types (6.1)</a><ol class="toc"><li><a href="#intrinsics"><span class="secnum">1.1.1</span> Well-Known Intrinsic Objects (6.1.7.4)</a></li></ol></li><li><a href="#int64-type"><span class="secnum">1.2</span> The Int64 type</a></li><li><a href="#uint64-type"><span class="secnum">1.3</span> The Uint64 type</a></li></ol></li><li><a href="#abstract-operations"><span class="secnum">2</span> Abstract Operations (7)</a><ol class="toc"><li><a href="#type-conversion"><span class="secnum">2.1</span> Type Conversion (7.1)</a><ol class="toc"><li><a href="#to-primitive"><span class="secnum">2.1.1</span> ToPrimitive ( input [, PreferredType] ) (7.1.1)</a></li><li><a href="#to-boolean"><span class="secnum">2.1.2</span> ToBoolean ( argument ) (7.1.2)</a></li><li><a href="#to-number"><span class="secnum">2.1.3</span> ToNumber ( argument ) (7.1.3)</a></li><li><a href="#to-int64"><span class="secnum">2.1.4</span> ToInt64 ( argument )</a></li><li><a href="#to-uint64"><span class="secnum">2.1.5</span> ToUint64 ( argument )</a></li><li><a href="#to-string"><span class="secnum">2.1.6</span> ToString ( argument ) (7.1.12)</a></li><li><a href="#to-object"><span class="secnum">2.1.7</span> ToObject ( argument ) (7.1.13)</a></li></ol></li><li><a href="#require-object-coercible"><span class="secnum">2.2</span> RequireObjectCoercible ( argument ) (7.2.1)</a></li><li><a href="#same-value"><span class="secnum">2.3</span> SameValue(x, y) (7.2.9)</a></li><li><a href="#same-value-zero"><span class="secnum">2.4</span> SameValueZero(x, y) (7.2.10)</a></li><li><a href="#abstract-relational-comparison"><span class="secnum">2.5</span> Abstract Relational Comparison (7.2.11)</a></li><li><a href="#abstract-equality"><span class="secnum">2.6</span> Abstract Equality Comparison (7.2.12)</a></li><li><a href="#strict-equality-comparison"><span class="secnum">2.7</span> Strict Equality Comparison (7.2.13)</a></li></ol></li><li><a href="#numeric-literals"><span class="secnum">3</span> Numeric Literals</a><ol class="toc"><li><a href="#numeric-literals-mv"><span class="secnum">3.1</span> Static Semantics: MV</a></li></ol></li><li><a href="#typeof"><span class="secnum">4</span> The typeof Operator (12.5.6)</a><ol class="toc"><li><a href="#typeof-evaluation"><span class="secnum">4.1</span> Runtime Semantics: Evaluation (12.5.6.1)</a></li></ol></li><li><a href="#addition"><span class="secnum">5</span> The Addition operator ( + ) (12.7.3)</a><ol class="toc"><li><a href="#addition-semantics"><span class="secnum">5.1</span> Runtime Semantics: Evaluation (12.7.3.1)</a></li></ol></li><li><a href="#numbers-and-dates"><span class="secnum">6</span> Numbers and Dates (20)</a><ol class="toc"><li><a href="#number"><span class="secnum">6.1</span> Number Objects (20.1)</a><ol class="toc"><li><a href="#number-constructor"><span class="secnum">6.1.1</span> The Number Constructor (20.1.1)</a><ol class="toc"><li><a href="#number-value"><span class="secnum">6.1.1.1</span> Number ( [ value ] ) (20.1.1.1)</a></li></ol></li></ol></li></ol></li><li><a href="#int64"><span class="secnum">7</span> Int64 Objects</a><ol class="toc"><li><a href="#int64-constructor"><span class="secnum">7.1</span> The Int64 constructor</a><ol class="toc"><li><a href="#int64-value"><span class="secnum">7.1.1</span> Int64( [ value ] )</a></li></ol></li><li><a href="#int64-properties"><span class="secnum">7.2</span> Properties of the Int64 constructor</a><ol class="toc"><li><a href="#int64-max-value"><span class="secnum">7.2.1</span> Int64.MAX_VALUE</a></li><li><a href="#int64-min-value"><span class="secnum">7.2.2</span> Int64.MIN_VALUE</a></li><li><a href="#int64-add"><span class="secnum">7.2.3</span> Int64.add( a, b )</a></li><li><a href="#int64-sub"><span class="secnum">7.2.4</span> Int64.sub( a, b )</a></li><li><a href="#int64-mul"><span class="secnum">7.2.5</span> Int64.mul( a, b )</a></li><li><a href="#int64-div"><span class="secnum">7.2.6</span> Int64.div( a, b )</a></li><li><a href="#int64-mod"><span class="secnum">7.2.7</span> Int64.mod( a, b )</a></li><li><a href="#int64-neg"><span class="secnum">7.2.8</span> Int64.neg( a )</a></li><li><a href="#int64-not"><span class="secnum">7.2.9</span> Int64.not( a )</a></li><li><a href="#int64-and"><span class="secnum">7.2.10</span> Int64.and( a, b )</a></li><li><a href="#int64-or"><span class="secnum">7.2.11</span> Int64.or( a, b )</a></li><li><a href="#int64-xor"><span class="secnum">7.2.12</span> Int64.xor( a, b )</a></li><li><a href="#int64-greater-than"><span class="secnum">7.2.13</span> Int64.greaterThan( a, b )</a></li><li><a href="#int64-less-than"><span class="secnum">7.2.14</span> Int64.lessThan( a, b )</a></li><li><a href="#int64-greater-than-or-equal"><span class="secnum">7.2.15</span> Int64.greaterThanOrEqual( a, b )</a></li><li><a href="#int64-less-than-or-equal"><span class="secnum">7.2.16</span> Int64.lessThanOrEqual( a, b )</a></li><li><a href="#int64-compare"><span class="secnum">7.2.17</span> Int64.compare( a, b )</a></li><li><a href="#int64-min"><span class="secnum">7.2.18</span> Int64.min( values... )</a></li><li><a href="#int64-max"><span class="secnum">7.2.19</span> Int64.max( values... )</a></li><li><a href="#int64-abs"><span class="secnum">7.2.20</span> Int64.abs( a )</a></li><li><a href="#int64-combine"><span class="secnum">7.2.21</span> Int64.combine( lo, hi )</a></li><li><a href="#int64-shift-left"><span class="secnum">7.2.22</span> Int64.shiftLeft( value, shifter )</a></li><li><a href="#int64-shift-right-arithmetic"><span class="secnum">7.2.23</span> Int64.shiftRightArithmetic( value, shifter )</a></li></ol></li><li><a href="#int64-proto"><span class="secnum">7.3</span> Properties of the Int64 Prototype Object</a><ol class="toc"><li><a href="#int64-proto-constructor>
The initial value of `Int64.prototype.constructor` is the intrinsic object %Int64%.
</emu-clause>

<emu-clause id="><span class="secnum">7.3.1</span> Int64.prototype.valueOf()</a></li><li><a href="#int64-tolocalestring"><span class="secnum">7.3.2</span> Int64.prototype.toLocaleString( [ reserved1 [ , reserved2 ] ])</a></li><li><a href="#int64-prototype-tostring"><span class="secnum">7.3.3</span> Int64.prototype.toString()</a></li></ol></li></ol></li><li><a href="#int64"><span class="secnum">8</span> Uint64 Objects</a><ol class="toc"><li><a href="#uint64-constructor"><span class="secnum">8.1</span> The Uint64 constructor</a><ol class="toc"><li><a href="#int64-value"><span class="secnum">8.1.1</span> Uint64( [ value ] )</a></li></ol></li><li><a href="#uint64-properties"><span class="secnum">8.2</span> Properties of the Uint64 constructor</a><ol class="toc"><li><a href="#uint64-max-value"><span class="secnum">8.2.1</span> Uint64.MAX_VALUE</a></li><li><a href="#uint64-min-value"><span class="secnum">8.2.2</span> Uint64.MIN_VALUE</a></li><li><a href="#uint64-add"><span class="secnum">8.2.3</span> Uint64.add( a, b )</a></li><li><a href="#uint64-min"><span class="secnum">8.2.4</span> Uint64.min( values... )</a></li><li><a href="#uint64-max"><span class="secnum">8.2.5</span> Uint64.max( values... )</a></li><li><a href="#uint64-combine"><span class="secnum">8.2.6</span> Uint64.combine( lo, hi )</a></li><li><a href="#uint64-shift-left"><span class="secnum">8.2.7</span> Uint64.shiftLeft( value, shifter )</a></li><li><a href="#uint64-shift-right-logical"><span class="secnum">8.2.8</span> Uint64.shiftRightLogical( value, shifter )</a></li><li><a href="#uint64-clz"><span class="secnum">8.2.9</span> Uint64.clz( value )</a></li></ol></li><li><a href="#uint64-proto"><span class="secnum">8.3</span> Properties of the Uint64 Prototype Object</a><ol class="toc"><li><a href="#uint64-proto-constructor>
The initial value of `Uint64.prototype.constructor` is the intrinsic object %Uint64%.
</emu-clause>

<emu-clause id="><span class="secnum">8.3.1</span> Uint64.prototype.valueOf()</a></li><li><a href="#uint64-tolocalestring"><span class="secnum">8.3.2</span> Uint64.prototype.toLocaleString( [ reserved1 [ , reserved2 ] ])</a></li><li><a href="#uint64-prototype-tostring"><span class="secnum">8.3.3</span> Uint64.prototype.toString()</a></li></ol></li></ol></li><li><a href="#typedarray-objects"><span class="secnum">9</span> TypedArray Objects (22.2)</a></li></ol></div><emu-intro id="intro">
<h1><span class="secnum"></span>Introduction</h1>
<p>
This proposal adds 64-bit integer arithmetic to ECMAScript. The main language features added are:
</p><ul>
<li>Signed and unsigned primitive types Int64 and Uint64</li>
<li>A function-based interface for basic arithmetic operations</li>
<li>Literals in the style <code>0L</code> and <code>0UL</code></li>
<li>Value semantics for integer types, with semantic equality</li>
<li>Homogeneous arrays of integers Int64Array and Uint64Array, and DataView operations</li>
</ul>
Specifically omitted features are:
<ul>
<li>Operator overloading is left for a future specification. Multiple dispatch is very complicated; ideally, it could be defined in a way which is general to objects, not just values or primitives. Brendan Eich has been developing <a href="http://www.slideshare.net/BrendanEich/extensible-operators-and-literals-for-javascript">a proposal</a>.</li>
<li>Implicit coercions to and from Int64/Uint64. Unfortunately, neither the set of Numbers nor the set of Int64 or Uint64 values contains the other. In general, coercions lose information. The way that C and Java define operators like <code>+</code> between <code>double</code> and <code>long</code>/<code>uint64_t</code> is to have an output of the type <code>double</code>. However, ECMAScript makes this more tricky because an innocent-looking snippet like <code>x + 1</code> would return a Number output under the same rule, even if <code>x</code> is a <code>Int64</code>. Therefore, in this proposal, ToNumber throws an exception on 64-bit ints, following <a href="http://littledan.github.io/simd.html">SIMD.js</a>, and arithmetic operators hit this case as well</li>
</ul>
64-bit integers are motivated by a number of use cases:
<ul>
<li>When compiling code to ECMAScript from another language (for example, C/C++ in Emscripten, or Java in GWT), 64-bit integers are often needed as a datatype. <code>Number</code> will often work, but it will sometimes lose precision, leading to difficult bugs. Instead, lo/hi pairs are needed.</li>
<li>Emulating 64-bit math is not very cheap, leading to <a href="https://gist.github.com/BrendanEich/4294d5c212a6d2254703">proposals to add <code>Math</code> functions for lo/hi pairs</a>. But if it wouldn't be too hard to get real 64-bit ints, it would be nice to not have to resort to such a stopgap.</li>
<li>Cryptographic applications need 64-bit ints. While this spec does not define all the proper fixtime operations needed, it gives a datatype which WebCrypto could use as a base.</li>
<li>64-bit values come up in various places as identifiers, elements in binary protocols (e.g., image formats, Google protobufs), etc. Developers end up doing all kinds of things to deal with this, including passing the numbers as strings, two-element lo/hi pair arrays, and just casting it to a Number. 64-bit integers provide a standard library way to deal with these values, and 64-bit literals pave the way for eventual inclusion in JSON.</li>
<li>Provides the basic datatype which future proposals can build off of to implement operator overloading, SIMD vectors containing 64-bit ints, web specifications which pass 64-bit ints between the browser and ECMAScript, etc.</li>
</ul>
<p></p>
<p>
Specification-wise, the addition of more numerical types requires pervasive to ECMAScript's representation of numbers. The ES2015 specification identifies ECMAScript <code>Number</code>s with mathematical numbers. With the addition of integers, and the fact that the set of double-precision floating point values intersects the sets of 64-bit signed and unsigned integers (which intersect each other), numbers in ECMAScript have to be formalized as tagged values. The complete change to the specification text is outside the scope of this strawman, but it will have to be dealt eventually. For the purposes of this strawman, interpret "untagged" numbers as Numbers by default when used as ECMAScript values.
</p>
<p>
Please file any issues <a href="https://github.com/littledan/value-spec/issues">here</a>. The authoritative copy of this document is <a href="https://github.com/littledan/value-spec/blob/master/int64.html">in the value-spec repo</a> and a rendered, up-to-date copy is hosted <a href="http://littledan.github.io/int64.html">here</a>.
</p>
</emu-intro>

<emu-clause id="types">
<h1><span class="secnum">1</span>ECMAScript Data Types and Values (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">6</a>)</h1>
<emu-clause id="all-types">
<h1><span class="secnum">1.1</span>ECMAScript language types (<a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-language-types">6.1</a>)</h1>
<emu-clause id="intrinsics">
<h1><span class="secnum">1.1.1</span>Well-Known Intrinsic Objects (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-well-known-intrinsic-objects">6.1.7.4</a>)</h1>
<p>
<strong>Intrinsic name</strong>: %Int64%
<br>
<strong>Global name</strong>: <code>Int64</code>
<br>
<strong>ECMAScript Language Association</strong>: The `<a href="#int64">Int64</a>` object
</p>

<p>
<strong>Intrinsic name</strong>: %Int64Prototype%
<br>
<strong>Global name</strong>: <code>Int64.prototype</code>
<br>
<strong>ECMAScript Language Association</strong>: The initial value of the prototype data property of %Int64Constructor%
</p>
<p>
<strong>Intrinsic name</strong>: %Uint64%
<br>
<strong>Global name</strong>: <code>Uint64</code>
<br>
<strong>ECMAScript Language Association</strong>: The `<a href="#uint64">Uint64</a>` object
</p>

<p>
<strong>Intrinsic name</strong>: %Uint64Prototype%
<br>
<strong>Global name</strong>: <code>Uint64.prototype</code>
<br>
<strong>ECMAScript Language Association</strong>: The initial value of the prototype data property of %Uint64Constructor%
</p>
</emu-clause>
</emu-clause>

<emu-clause id="int64-type">
<h1><span class="secnum">1.2</span>The Int64 type</h1>
The Int64 type is the set of all integers [-9223372036854775808,9223372036854775807] tagged as Int64, that is, the numbers that can be expressed in a signed, 64-bit 2's complement integer.
</emu-clause>

<emu-clause id="uint64-type">
<h1><span class="secnum">1.3</span>The Uint64 type</h1>
The Uint64 type is the set of all integers [0,18446744073709551615] tagged as Uint64, that is, the numbers that can be expressed in an unsigned, 64-bit 2's complement integer.
</emu-clause>
</emu-clause>

<emu-clause id="abstract-operations">
<h1><span class="secnum">2</span>Abstract Operations (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-abstract-operations">7</a>)</h1>

<emu-clause id="type-conversion">
<h1><span class="secnum">2.1</span>Type Conversion (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-type-conversion">7.1</a>)</h1>

<emu-clause id="to-primitive">
<h1><span class="secnum">2.1.1</span>ToPrimitive ( input [, PreferredType] ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive">7.1.1</a>)</h1>

<strong>Argument type</strong>: Int64
<br>
<strong>Result</strong>: return <var>input</var>
<br>

<strong>Argument type</strong>: Uint64
<br>
<strong>Result</strong>: return <var>input</var>
<br>
</emu-clause>

<emu-clause id="to-boolean">
<h1><span class="secnum">2.1.2</span>ToBoolean ( argument ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toboolean">7.1.2</a>)</h1>

<strong>Argument type</strong>: Int64
<br>
<strong>Result</strong>: If <var>argument</var> is an Int64-tagged 0, return <emu-const>false</emu-const>; otherwise, return <emu-const>true</emu-const>.

<strong>Argument type</strong>: Uint64
<br>
<strong>Result</strong>: If <var>argument</var> is a Uint64-tagged 0, return <emu-const>false</emu-const>; otherwise, return <emu-const>true</emu-const>.

<emu-note><span class="note">Note</span>
Another option would be to make all <code>Int64</code> and <code>Uint64</code> values be truthy, under the interpretation that it was a mistake to have anything be falsy but things like <emu-const>false</emu-const>, <emu-const>undefined</emu-const>, etc. However, this interpretation is consistent with Numbers, and it could make refactoring code using Numbers, or code written in C, easier to port.
</emu-note>
</emu-clause>

<emu-clause id="to-number">
<h1><span class="secnum">2.1.3</span>ToNumber ( argument ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tonumber">7.1.3</a>)</h1>

<strong>Argument type</strong>: Int64
<br>
<strong>Result</strong>: throw a <emu-const>TypeError</emu-const> exception
<br>

<strong>Argument type</strong>: Uint64
<br>
<strong>Result</strong>: throw a <emu-const>TypeError</emu-const> exception
<br>

<emu-note><span class="note">Note</span>
While it would be possible to provide a conversion to Numbers, the conversion would lose precision and lead operators like <code>+</code> to operate on less precise numbers. Throwing leaves the door open for future operator overloading while maintaining backwards compatibility.
</emu-note>
</emu-clause>

<emu-clause id="to-int64">
<h1><span class="secnum">2.1.4</span>ToInt64 ( argument )</h1>

<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Object</code>,
    <ol>
      <li>Let <var>argument</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive">ToPrimitive</a>(<var>argument</var>, hint Number).</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Int64</code>, return <var>argument</var>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Uint64</code>,
    <ol>
      <li>If <var>argument</var> &gt; 9223372036854775807, return <var>argument</var> - 18446744073709551616 tagged as <code>Int64</code>.</li>
      <li>Else, return <var>argument</var> tagged as <code>Int64</code>.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Number</code>,
    <ol>
      <li>If number is NaN, +0, −0, +∞, or −∞, return 0.</li>
      <li>Let <var>int</var> be the mathematical value that is the same sign as number and whose magnitude is floor(abs(<var>argument</var>)).</li>
      <li>Let <var>int64bit</var> be int modulo 2<sup>64</sup>.</li>
      <li>If <var>int64bit</var> ≥ 2<sup>63</sup>, return <var>int64bit</var> − 2<sup>64</sup> tagged as Int64, otherwise return <var>int64bit</var> tagged as Int64.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>String</code>, parse the number as a string as described in the section <code>"ToNumber Applied to the String Type"</code>, throwing a RangeError if the result is not representable exactly in a Int64, including on -0, NaN and Infinity.</li>
  <li>Otherwise, throw a TypeError.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="to-uint64">
<h1><span class="secnum">2.1.5</span>ToUint64 ( argument )</h1>

<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Object</code>,
    <ol>
      <li>Let <var>argument</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive">ToPrimitive</a>(<var>argument</var>, hint Number).</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Uint64</code>, return <var>argument</var>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Int64</code>,
    <ol>
      <li>If <var>argument</var> &lt; 0, return <var>argument</var> + 18446744073709551616 tagged as <code>Uint64</code>.</li>
      <li>Else, return <var>argument</var> tagged as <code>Uint64</code>.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>Number</code>,
    <ol>
      <li>If number is NaN, +0, −0, +∞, or −∞, return 0.</li>
      <li>Let <var>int</var> be the mathematical value that is the same sign as number and whose magnitude is floor(abs(<var>argument</var>)).</li>
      <li>Let <var>int64bit</var> be int modulo 2<sup>64</sup>.</li>
      <li>Return <var>int64bit</var> tagged as <code>Uint64</code>.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>argument</var>) is <code>String</code>, parse the number as a string as described in the section <code>"ToNumber Applied to the String Type"</code>, throwing a RangeError if the result is not representable exactly in a Uint64, including on -0, NaN and Infinity.</li>
  <li>Otherwise, throw a TypeError.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="to-string">
<h1><span class="secnum">2.1.6</span>ToString ( argument ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tostring">7.1.12</a>)</h1>

<strong>Argument type</strong>: Int64
<br>
<strong>Result</strong>: Convert the value of the signed integer to a base-10 string in the normal way. <!-- TODO(littledan): Does this need to be spelled out? -->
<br>
<strong>Argument type</strong>: Uint64
<br>
<strong>Result</strong>: Convert the value of the signed integer to a base-10 string in the normal way. <!-- TODO(littledan): Does this need to be spelled out? -->
</emu-clause>

<emu-clause id="to-object">
<h1><span class="secnum">2.1.7</span>ToObject ( argument ) (<a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-toobject">7.1.13</a>)</h1>

<strong>Argument type</strong>: Int64
<br>
<strong>Result</strong>: Return a new %Int64% wrapper object whose [[Int64Data]] internal slot is set to <var>argument</var>.
<br>

<strong>Argument type</strong>: Uint64
<br>
<strong>Result</strong>: Return a new %Uint64% wrapper object whose [[Uint64Data]] internal slot is set to <var>argument</var>.
<br>
</emu-clause>
</emu-clause>

<emu-clause id="require-object-coercible">
<h1><span class="secnum">2.2</span>RequireObjectCoercible ( argument ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-requireobjectcoercible">7.2.1</a>)</h1>

<strong>Argument type</strong>: Int64
<br>
<strong>Result</strong>: return <var>argument</var>
<br>
<strong>Argument type</strong>: Uint64
<br>
<strong>Result</strong>: return <var>argument</var>
<br>
</emu-clause>

<emu-clause id="same-value">
<h1><span class="secnum">2.3</span>SameValue(x, y) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevalue">7.2.9</a>)</h1>
<emu-alg><ol>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>x</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is different from <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>), return <emu-const>false</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Undefined, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Null, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Number, then
    <ol>
      <li>If <var>x</var> is <emu-const>NaN</emu-const> and <var>y</var> is <emu-const>NaN</emu-const>, return <emu-const>true</emu-const>.</li>
      <li>If <var>x</var> is +0 and <var>y</var> is -0, return <emu-const>false</emu-const>.</li>
      <li>If <var>x</var> is -0 and <var>y</var> is +0, return <emu-const>false</emu-const>.</li>
      <li>If <var>x</var> is the same Number value as <var>y</var>, return <emu-const>true</emu-const>.</li>
      <li>Return <emu-const>false</emu-const>.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is String, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are exactly the same sequence of code units (same length and same code units at corresponding indices) return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Boolean, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are both true or both false, return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Symbol, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are both the same Symbol value, return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>
    <ins>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Int64, then</ins>
    <ol>
      <li>
        <ins>Assert <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Int64.</ins>
      </li>
      <li>
        <ins>If <var>x</var> is the same Int64 value as <var>y</var>, return <emu-const>true</emu-const>.</ins>
      </li>
      <li>
        <ins>Return <emu-const>false</emu-const>.</ins>
      </li>
    </ol>
  </li>
  <li>
    <ins>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Uint64, then</ins>
    <ol>
      <li>
        <ins>Assert <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Uint64.</ins>
      </li>
      <li>
        <ins>If <var>x</var> is the same Uint64 value as <var>y</var>, return <emu-const>true</emu-const>.</ins>
      </li>
      <li>
        <ins>Return <emu-const>false</emu-const>.</ins>
      </li>
    </ol>
  </li>
  <li>Return <emu-const>true</emu-const> if <var>x</var> and <var>y</var> are the same Object value. Otherwise, return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="same-value-zero">
<h1><span class="secnum">2.4</span>SameValueZero(x, y) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevaluezero">7.2.10</a>)</h1>
<emu-alg><ol>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>x</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is different from <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>), return <emu-const>false</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Undefined, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Null, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Number, then
    <ol>
      <li>If <var>x</var> is <emu-const>NaN</emu-const> and <var>y</var> is <emu-const>NaN</emu-const>, return <emu-const>true</emu-const>.</li>
      <li>If <var>x</var> is +0 and <var>y</var> is -0, return <emu-const>true</emu-const>.</li>
      <li>If <var>x</var> is -0 and <var>y</var> is +0, return <emu-const>true</emu-const>.</li>
      <li>If <var>x</var> is the same Number value as <var>y</var>, return <emu-const>true</emu-const>.</li>
      <li>Return <emu-const>false</emu-const>.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is String, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are exactly the same sequence of code units (same length and same code units at corresponding indices) return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Boolean, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are both true or both false, return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Symbol, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are both the same Symbol value, return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>
    <ins>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Int64, then</ins>
    <ol>
      <li>
        <ins>Assert <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Int64.</ins>
      </li>
      <li>
        <ins>If <var>x</var> is the same Int64 value as <var>y</var>, return <emu-const>true</emu-const>.</ins>
      </li>
      <li>
        <ins>Return <emu-const>false</emu-const>.</ins>
      </li>
    </ol>
  </li>
  <li>
    <ins>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Uint64, then</ins>
    <ol>
      <li>
        <ins>Assert <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Uint64.</ins>
      </li>
      <li>
        <ins>If <var>x</var> is the same Uint64 value as <var>y</var>, return <emu-const>true</emu-const>.</ins>
      </li>
      <li>
        <ins>Return <emu-const>false</emu-const>.</ins>
      </li>
    </ol>
  </li>
  <li>Return <emu-const>true</emu-const> if <var>x</var> and <var>y</var> are the same Object value. Otherwise, return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="abstract-relational-comparison">
<h1><span class="secnum">2.5</span>Abstract Relational Comparison (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-abstract-relational-comparison">7.2.11</a>)</h1>
<emu-note><span class="note">Note</span><p>No changes needed for Int64 or Uint64; it will throw a TypeError if either operand is a Int64 value because the algorithm will call ToNumber in step 6.a or 6.c, which throws on Int64 values.</p><p>It is important for Abstract Relational Comparison to throw on Int64 types because there is no clear scalar boolean interpretation, and allowing it to throw makes it possible overload the operator in the future.</p></emu-note>
</emu-clause>

<emu-clause id="abstract-equality">
<h1><span class="secnum">2.6</span>Abstract Equality Comparison (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-abstract-equality-comparison">7.2.12</a>)</h1>
<emu-alg><ol>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>x</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is the same as <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>), then
    <ol>
      <li>Return the result of performing Strict Equality Comparison x === y.</li>
    </ol>
  </li>
  <li>If x is null and y is undefined, return <emu-const>true</emu-const>.</li>
  <li>If x is undefined and y is null, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Number and <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is String,<br> return the result of the comparison x == <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tonumber">ToNumber</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is String and <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Number,<br> return the result of the comparison <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tonumber">ToNumber</a>(<var>x</var>) == y.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Boolean, return the result of the comparison <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tonumber">ToNumber</a>(<var>x</var>) == y.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Boolean, return the result of the comparison x == <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tonumber">ToNumber</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is either String, Number,
    <ins>Int64, Uint64</ins> or Symbol and <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Object, then<br>return the result of the comparison x == <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive">ToPrimitive</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Object and <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is either String, Number,
    <ins>Int64, Uint64</ins> or Symbol, then<br>return the result of the comparison <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-toprimitive">ToPrimitive</a>(<var>x</var>) == y.</li>
  <li>Return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="strict-equality-comparison">
<h1><span class="secnum">2.7</span>Strict Equality Comparison (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-strict-equality-comparison">7.2.13</a>)</h1>
<emu-alg><ol>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>x</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>y</var>).</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is different from <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>), return <emu-const>false</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Undefined, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Null, return <emu-const>true</emu-const>.</li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Number, then
    <ol>
      <li>If <var>x</var> is <emu-const>NaN</emu-const>, return <emu-const>false</emu-const>.</li>
      <li>If <var>y</var> is <emu-const>NaN</emu-const>, return <emu-const>false</emu-const>.</li>
      <li>If <var>x</var> is the same Number value as y, return <emu-const>true</emu-const>.</li>
      <li>If <var>x</var> is +0 and y is −0, return <emu-const>true</emu-const>.</li>
      <li>If <var>x</var> is −0 and y is +0, return <emu-const>true</emu-const>.</li>
      <li>Return <emu-const>false</emu-const>.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is String, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are exactly the same sequence of code units (same length and same code units at corresponding indices) return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Boolean, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are both true or both false, return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Symbol, then
    <ol>
      <li>If <var>x</var> and <var>y</var> are both the same Symbol value, return true; otherwise, return false.</li>
    </ol>
  </li>
  <li>
    <ins>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Int64, then</ins>
    <ol>
      <li>
        <ins>Assert <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Int64.</ins>
      </li>
      <li>
        <ins>If <var>x</var> is the same Int64 value as <var>y</var>, return <emu-const>true</emu-const>.</ins>
      </li>
      <li>
        <ins>Return <emu-const>false</emu-const>.</ins>
      </li>
    </ol>
  </li>
  <li>
    <ins>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>x</var>) is Uint64, then</ins>
    <ol>
      <li>
        <ins>Assert <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>y</var>) is Uint64.</ins>
      </li>
      <li>
        <ins>If <var>x</var> is the same Uint64 value as <var>y</var>, return <emu-const>true</emu-const>.</ins>
      </li>
      <li>
        <ins>Return <emu-const>false</emu-const>.</ins>
      </li>
    </ol>
  </li>
  <li>Return <emu-const>true</emu-const> if <var>x</var> and <var>y</var> are the same Object value. Otherwise, return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>
</emu-clause>

<emu-clause id="numeric-literals">
<h1><span class="secnum">3</span>Numeric Literals</h1>
In "12.2.4 Literals", where <var>NumericLiteral</var> is referred to, instead use <var>TypedNumericLiteral</var>, as defined below:
<emu-production name="TypedNumericLiteral">
  <emu-nt>TypedNumericLiteral<emu-mods></emu-mods><emu-mods></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs><emu-nt>NumericLiteral<emu-mods></emu-mods></emu-nt></emu-rhs>
  <emu-rhs><emu-nt>NumericLiteral<emu-mods></emu-mods></emu-nt><emu-t>L</emu-t></emu-rhs>
  <emu-rhs><emu-nt>NumericLiteral<emu-mods></emu-mods></emu-nt><emu-t>UL</emu-t></emu-rhs>
</emu-production>
<emu-clause id="numeric-literals-mv">
<h1><span class="secnum">3.1</span>Static Semantics: MV</h1>
<ul>
<li>The MV of <em>TypedNumericLiteral :: NumericLiteral</em> is the MV of <var>NumericLiteral</var></li>
<li>The MV of <em>TypedNumericLiteral :: NumericLiteral</em><code>L</code> is ToInt64(MV of <var>NumericLiteral</var>)</li>
<li>The MV of <em>TypedNumericLiteral :: NumericLiteral</em><code>UL</code> is ToUint64(MV of <var>NumericLiteral</var>)</li>
</ul>
</emu-clause>
</emu-clause>

<emu-clause id="typeof">
<h1><span class="secnum">4</span>The typeof Operator (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-typeof-operator">12.5.6</a>)</h1>
<emu-clause id="typeof-evaluation">
<h1><span class="secnum">4.1</span>Runtime Semantics: Evaluation (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-typeof-operator-runtime-semantics-evaluation">12.5.6.1</a>)</h1>

<strong>Type of val</strong>: Int64
<br>
<strong>Result</strong>: "int64"
<br>
<strong>Type of val</strong>: Uint64
<br>
<strong>Result</strong>: "uint64"
<br>
<emu-note><span class="note">Note</span>This follows the pattern for Number ("number"), Boolean ("boolean"), etc.</emu-note>
</emu-clause>
</emu-clause>

<emu-clause id="addition">
<h1><span class="secnum">5</span>The Addition operator ( + ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-addition-operator-plus">12.7.3</a>)</h1>
<emu-clause id="addition-semantics">
<h1><span class="secnum">5.1</span>Runtime Semantics: Evaluation (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-addition-operator-plus">12.7.3.1</a>)</h1>
<emu-note><span class="note">Note</span><p>No changes needed for Int64 or Uint64. With one Int64 argument and one argument which is a String after ToPrimitive is applied, this will coerce the Int64 value to a string. Otherwise, if either argument is an Int64 value, then ToNumber will be run on step 12. or 14., which would throw a TypeError.</p><p>It is important for <code>+</code> to throw when applied to Int64 types to allow the future definition of operator overloading on <code>+</code>.</p></emu-note>
</emu-clause>
</emu-clause>

<emu-clause id="numbers-and-dates">
<h1><span class="secnum">6</span>Numbers and Dates (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-numbers-and-dates">20</a>)</h1>
<emu-clause id="number">
<h1><span class="secnum">6.1</span>Number Objects (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number-objects">20.1</a>)</h1>
<emu-clause id="number-constructor">
<h1><span class="secnum">6.1.1</span>The Number Constructor (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number-constructor">20.1.1</a>)</h1>
<emu-clause id="number-value">
<h1><span class="secnum">6.1.1.1</span>Number ( [ value ] ) (<a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-number-constructor-number-value">20.1.1.1</a>)</h1>
<emu-alg><ol>
  <li>If no arguments were passed to this function invocation, let <var>n</var> be +0.</li>
  <li>
    <ins>Else, if <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>n</var>) is Int64, let <var>n</var> be the result of converting <var>value</var> to the nearest Number, with IEEE 754 round-to-nearest, ties-to-even semantics.</ins>
  </li>
  <li>
    <ins>Else, if <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>n</var>) is Uint64, let <var>n</var> be the result of converting <var>value</var> to the nearest Number, with IEEE 754 round-to-nearest, ties-to-even semantics.</ins>
  </li>
  <li>Else, let <var>n</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tonumber">ToNumber</a>(<var>value</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>n</var>).</li>
  <li>If NewTarget is <emu-const>undefined</emu-const>, return <var>n</var>.</li>
  <li>Let O be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a>(NewTarget, <code>"%NumberPrototype%"</code>, «[[NumberData]]» ).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(O).</li>
  <li>Set the value of O’s [[NumberData]] internal slot to n.</li>
  <li>Return O.</li>
</ol></emu-alg>
</emu-clause>
</emu-clause>
</emu-clause>
</emu-clause>

<emu-clause id="int64">
<h1><span class="secnum">7</span>Int64 Objects</h1>

<emu-clause id="int64-constructor">
<h1><span class="secnum">7.1</span>The Int64 constructor</h1>
<p>
The <code>Int64</code> constructor is the %Int64% intrinsic object and the initial value of the Int64 property of the global object. When called as a constructor, it creates and initializes a new Int64 object. When <code>Int64</code> is called as a function rather than as a constructor, it performs a type conversion. <code>Int64</code> has a number of function properties for operating on Int64 values.
</p>
<emu-clause id="int64-value">
<h1><span class="secnum">7.1.1</span>Int64( [ value ] )</h1>
When <code>Int64</code> is called with argument <var>value</var>, the following steps are taken:
<emu-alg><ol>
  <li>If no arguments were passed to this function invocation, let <var>n</var> be 0.</li>
  <li>Else, let <var>n</var> be ToInt64(<var>value</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>n</var>).</li>
  <li>If NewTarget is <emu-const>undefined</emu-const>, return <var>n</var>.</li>
  <li>Let <var>O</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a>(NewTarget, <code>"%Int64Prototype%"</code>, «[[Int64Data]]» ).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>O</var>).</li>
  <li>Set the value of <var>O</var>’s [[NumberData]] internal slot to <var>n</var>.</li>
  <li>Return <var>O</var>.</li>
</ol></emu-alg>
</emu-clause>
</emu-clause>
<emu-clause id="int64-properties">
<h1><span class="secnum">7.2</span>Properties of the Int64 constructor</h1>
<p>
The value of the [[Prototype]] internal slot of the Int64 constructor is the intrinsic object %FunctionPrototype% (19.2.3).
</p>

<p>
Besides the <code>length</code> property (whose value is <emu-const>1</emu-const>), the Int64 constructor has the following properties:
</p>

<emu-clause id="int64-max-value">
<h1><span class="secnum">7.2.1</span>Int64.MAX_VALUE</h1>
<p>
The value of Int64.MAX_VALUE is the largest positive value of the Int64 type, which is 9223372036854775807, tagged as Int64.
</p>
<p>
This property has the attributes { [[Writable]]: <emu-const>false</emu-const>, [[Enumerable]]: <emu-const>false</emu-const>, [[Configurable]]: <emu-const>false</emu-const> }.
</p>
</emu-clause>

<emu-clause id="int64-min-value">
<h1><span class="secnum">7.2.2</span>Int64.MIN_VALUE</h1>
<p>
The value of Int64.MIN_VALUE is the smallest negative value of the Int64 type, which is -9223372036854775808, tagged as Int64.
</p>
<p>
This property has the attributes { [[Writable]]: <emu-const>false</emu-const>, [[Enumerable]]: <emu-const>false</emu-const>, [[Configurable]]: <emu-const>false</emu-const> }.
</p>
</emu-clause>

<emu-clause id="int64-add">
<h1><span class="secnum">7.2.3</span>Int64.add( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the result of adding the values of <var>a</var> and <var>b</var>, with signed 2's complement 64-bit overflow, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-sub">
<h1><span class="secnum">7.2.4</span>Int64.sub( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the result of subtracting <var>b</var> from <var>a</var>, with signed 2's complement 64-bit overflow, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-mul">
<h1><span class="secnum">7.2.5</span>Int64.mul( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the result of multiplying <var>a</var> by <var>b</var>, with signed 2's complement 64-bit overflow, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-div">
<h1><span class="secnum">7.2.6</span>Int64.div( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>b</var> is 0, throw a <emu-const>RangeError</emu-const>.</li>
  <li>If the <var>b</var> is <emu-const>-1</emu-const> and <var>a</var> is the minimum Int64 value, throw a <emu-const>RangeError</emu-const>.</li>
  <li>Return the result of the signed integer division of <var>a</var> by <var>b</var>, as an Int64 value, with division rounding towards 0.</li>
</ol></emu-alg>
<emu-note><span class="note">Note</span>The <emu-const>RangeError</emu-const> occurs where division would result in an overflow. This is a sufficiently rare case that it is raised as an error, as opposed to overflow for +, -, *.</emu-note>
</emu-clause>

<emu-clause id="int64-mod">
<h1><span class="secnum">7.2.7</span>Int64.mod( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>b</var> is 0, throw a <emu-const>RangeError</emu-const>.</li>
  <li>Return the result of the signed integer remainder of <var>a</var> divided by <var>b</var>, as an Int64 value, with division rounding towards 0.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-neg">
<h1><span class="secnum">7.2.8</span>Int64.neg( a )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is -9223372036854775808, return <var>a</var>.</li>
  <li>Otherwise, return the additive inverse of <var>a</var> as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-not">
<h1><span class="secnum">7.2.9</span>Int64.not( a )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the bitwise negation of <var>a</var>, interpreted as a signed 2's complement 64-bit integer, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-and">
<h1><span class="secnum">7.2.10</span>Int64.and( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the bitwise and of <var>a</var> with <var>b</var> interpreted as signed 2's complement 64-bit integers, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-or">
<h1><span class="secnum">7.2.11</span>Int64.or( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the bitwise or of <var>a</var> with <var>b</var> interpreted as signed 2's complement 64-bit integers, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-xor">
<h1><span class="secnum">7.2.12</span>Int64.xor( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the bitwise xor of <var>a</var> with <var>b</var> interpreted as signed 2's complement 64-bit integers, as an Int64 value.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-greater-than">
<h1><span class="secnum">7.2.13</span>Int64.greaterThan( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is greater than <var>b</var>, return <emu-const>true</emu-const>.</li>
  <li>Return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-less-than">
<h1><span class="secnum">7.2.14</span>Int64.lessThan( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is less than <var>b</var>, return <emu-const>true</emu-const>.</li>
  <li>Return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-greater-than-or-equal">
<h1><span class="secnum">7.2.15</span>Int64.greaterThanOrEqual( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is greater than or equal to <var>b</var>, return <emu-const>true</emu-const>.</li>
  <li>Return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-less-than-or-equal">
<h1><span class="secnum">7.2.16</span>Int64.lessThanOrEqual( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is less than or equal to <var>b</var>, return <emu-const>true</emu-const>.</li>
  <li>Return <emu-const>false</emu-const>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-compare">
<h1><span class="secnum">7.2.17</span>Int64.compare( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is less than <var>b</var>, return the Number -1.</li>
  <li>If <var>a</var> is equal to <var>b</var>, return the Number 0.</li>
  <li>Otherwise, <var>a</var> is greater than <var>b</var>; Return the Number 1.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-min">
<h1><span class="secnum">7.2.18</span>Int64.min( values... )</h1>
<emu-alg><ol>
  <li>If any of the <var>values</var> is not an Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If no arguments are given, then return the largest Int64 value, 9223372036854775807 tagged as Int64.</li>
  <li>Return the smallest Int64 argument among <var>values</var>.</li>
</ol></emu-alg>
The <code>length</code> of <code>Int64.min</code> is <emu-const>2</emu-const>.
<emu-note><span class="note">Note</span>A separate <code>min</code> is needed because <code>Math.min</code> will throw on <code>Int64</code> values when it tries to convert the to Numbers in the definition of Abstract Relational Comparison.</emu-note>
</emu-clause>

<emu-clause id="int64-max">
<h1><span class="secnum">7.2.19</span>Int64.max( values... )</h1>
<emu-alg><ol>
  <li>If any of the <var>values</var> is not an Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If no arguments are given, then return the smallest Int64 value, -9223372036854775808 tagged as Int64.</li>
  <li>Return the largest Int64 argument among <var>values</var>.</li>
</ol></emu-alg>
The <code>length</code> of <code>Int64.max</code> is <emu-const>2</emu-const>.
<emu-note><span class="note">Note</span>A separate <code>max</code> is needed because <code>Math.max</code> will throw on <code>Int64</code> values when it tries to convert the to Numbers in the definition of Abstract Relational Comparison.</emu-note>
</emu-clause>

<emu-clause id="int64-abs">
<h1><span class="secnum">7.2.20</span>Int64.abs( a )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If <var>a</var> is less than 0 and <var>a</var> does not equal -9223372036854775808, return the Int64 value -<var>a</var>.</li>
  <li>Return <var>a</var>.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-combine">
<h1><span class="secnum">7.2.21</span>Int64.combine( lo, hi )</h1>
<emu-alg><ol>
  <li>Let <var>loValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(lo).</li>
  <li>Let <var>hiValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(lo).</li>
  <li>Let <var>combined</var> be the mathematical value (<var>hiValue</var> &lt;&lt; 32) | <var>loValue</var>, tagged as Uint64.</li>
  <li>Return ToInt64(<var>combined</var>).</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-shift-left">
<h1><span class="secnum">7.2.22</span>Int64.shiftLeft( value, shifter )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Let <var>shiftValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(shifter).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>shiftValue</var>).</li>
  <li>Let <var>shiftCount</var> be <var>shiftValue</var> mod 64.</li>
  <li>Return the result of shifting <var>value</var> left by <var>shiftCount</var> bits, masked to 64 bits, tagged as Int64.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-shift-right-arithmetic">
<h1><span class="secnum">7.2.23</span>Int64.shiftRightArithmetic( value, shifter )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) is not Int64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Let <var>shiftValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(shifter).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>shiftValue</var>).</li>
  <li>Let <var>shiftCount</var> be <var>shiftValue</var> mod 64.</li>
  <li>Return the result of shifting <var>value</var> right by <var>shiftCount</var> bits, with the most significant bit propagated, tagged as Int64.</li>
</ol></emu-alg>
</emu-clause>

</emu-clause>
<emu-clause id="int64-proto">
<h1><span class="secnum">7.3</span>Properties of the Int64 Prototype Object</h1>
<emu-clause id="int64-proto-constructor>
The initial value of `Int64.prototype.constructor` is the intrinsic object %Int64%.
</emu-clause>

<emu-clause id=" int64-prototype-valueof"="">
<h1><span class="secnum">7.3.1</span>Int64.prototype.valueOf()</h1>
<emu-alg><ol>
  <li>If <emu-const>this</emu-const> does not have a [[Int64Data]] internal slot, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return <emu-const>this</emu-const>.[[Int64Data]].</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="int64-tolocalestring">
<h1><span class="secnum">7.3.2</span>Int64.prototype.toLocaleString( [ reserved1 [ , reserved2 ] ])</h1>
<p>
An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement the Int64.prototype.toLocaleString method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of the toLocaleString method is used.
</p>

<p>
Produces a String value that represents this Int64 value formatted according to the conventions of the host environment’s current locale. This function is implementation-dependent, and it is permissible, but not encouraged, for it to return the same thing as toString.
</p>

<p>
The meanings of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.
</p>

<p>
The length property of the toLocaleString method is 0.
</p>
<emu-note><span class="note">Note</span>ECMA-402 will need an extension to define toLocaleString on Int64 values.</emu-note>
</emu-clause>

<emu-clause id="int64-prototype-tostring">
<h1><span class="secnum">7.3.3</span>Int64.prototype.toString()</h1>
<emu-alg><ol>
  <li>If <emu-const>this</emu-const> does not have a [[Int64Data]] internal slot, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tostring">ToString</a>(<emu-const>this</emu-const>.[[Int64Data]]).</li>
</ol></emu-alg>
</emu-clause>

</emu-clause>
</emu-clause>

<emu-clause id="int64">
<h1><span class="secnum">8</span>Uint64 Objects</h1>

<emu-clause id="uint64-constructor">
<h1><span class="secnum">8.1</span>The Uint64 constructor</h1>
<p>
The <code>Uint64</code> constructor is the %Uint64% intrinsic object and the initial value of the Uint64 property of the global object. When called as a constructor, it creates and initializes a new Uint64 object. When <code>Uint64</code> is called as a function rather than as a constructor, it performs a type conversion. <code>Uint64</code> has a number of function properties for operating on Uint64 values.
</p>

<emu-clause id="int64-value">
<h1><span class="secnum">8.1.1</span>Uint64( [ value ] )</h1>
When <code>Uint64</code> is called with argument <var>value</var>, the following steps are taken:
<emu-alg><ol>
  <li>If no arguments were passed to this function invocation, let <var>n</var> be 0.</li>
  <li>Else, let <var>n</var> be ToUint64(<var>value</var>).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>n</var>).</li>
  <li>If NewTarget is <emu-const>undefined</emu-const>, return <var>n</var>.</li>
  <li>Let <var>O</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a>(NewTarget, <code>"%Uint64Prototype%"</code>, «[[Uint64Data]]» ).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>O</var>).</li>
  <li>Set the value of <var>O</var>’s [[NumberData]] internal slot to <var>n</var>.</li>
  <li>Return <var>O</var>.</li>
</ol></emu-alg>
</emu-clause>
</emu-clause>
<emu-clause id="uint64-properties">
<h1><span class="secnum">8.2</span>Properties of the Uint64 constructor</h1>
<p>
The value of the [[Prototype]] internal slot of the Uint64 constructor is the intrinsic object %FunctionPrototype% (19.2.3).
</p>

<p>
Besides the <code>length</code> property (whose value is <emu-const>1</emu-const>), the Uint64 constructor has the following properties:
</p>

<emu-clause id="uint64-max-value">
<h1><span class="secnum">8.2.1</span>Uint64.MAX_VALUE</h1>
<p>
The value of Uint64.MAX_VALUE is the largest positive value of the Uint64 type, which is 18446744073709551615, tagged as Uint64.
</p>
<p>
This property has the attributes { [[Writable]]: <emu-const>false</emu-const>, [[Enumerable]]: <emu-const>false</emu-const>, [[Configurable]]: <emu-const>false</emu-const> }.
</p>
</emu-clause>

<emu-clause id="uint64-min-value">
<h1><span class="secnum">8.2.2</span>Uint64.MIN_VALUE</h1>
<p>
The value of Int64.MIN_VALUE is the smallest value of the Uint64 type, which is 0, tagged as Int64.
</p>
<p>
This property has the attributes { [[Writable]]: <emu-const>false</emu-const>, [[Enumerable]]: <emu-const>false</emu-const>, [[Configurable]]: <emu-const>false</emu-const> }.
</p>
</emu-clause>

<emu-clause id="uint64-add">
<h1><span class="secnum">8.2.3</span>Uint64.add( a, b )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>a</var>) is not Uint64 or <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>b</var>) is not Uint64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return the result of adding the values of <var>a</var> and <var>b</var>, with signed 2's complement 64-bit overflow, as an Int64 value.</li>
</ol></emu-alg>
Other function properties of Int64 are added analogously, through <code>compare</code>.
</emu-clause>

<emu-clause id="uint64-min">
<h1><span class="secnum">8.2.4</span>Uint64.min( values... )</h1>
<emu-alg><ol>
  <li>If any of the <var>values</var> is not an Uint64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If no arguments are given, then return the largest Int64 value, 18446744073709551615 tagged as Uint64.</li>
  <li>Return the smallest Int64 argument among <var>values</var>.</li>
</ol></emu-alg>
The <code>length</code> of <code>Uint64.min</code> is <emu-const>2</emu-const>.
<emu-note><span class="note">Note</span>A separate <code>min</code> is needed because <code>Math.min</code> will throw on <code>Uint64</code> values when it tries to convert the to Numbers in the definition of Abstract Relational Comparison.</emu-note>
</emu-clause>

<emu-clause id="uint64-max">
<h1><span class="secnum">8.2.5</span>Uint64.max( values... )</h1>
<emu-alg><ol>
  <li>If any of the <var>values</var> is not an Uint64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>If no arguments are given, then return the smallest Int64 value, 0 tagged as Uint64.</li>
  <li>Return the largest Int64 argument among <var>values</var>.</li>
</ol></emu-alg>
The <code>length</code> of <code>Uint64.max</code> is <emu-const>2</emu-const>.
<emu-note><span class="note">Note</span>A separate <code>max</code> is needed because <code>Math.max</code> will throw on <code>Uint64</code> values when it tries to convert the to Numbers in the definition of Abstract Relational Comparison.</emu-note>
</emu-clause>

<emu-clause id="uint64-combine">
<h1><span class="secnum">8.2.6</span>Uint64.combine( lo, hi )</h1>
<emu-alg><ol>
  <li>Let <var>loValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(lo).</li>
  <li>Let <var>hiValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(lo).</li>
  <li>Return the mathematical value (<var>hiValue</var> &lt;&lt; 32) | <var>loValue</var>, tagged as Uint64.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="uint64-shift-left">
<h1><span class="secnum">8.2.7</span>Uint64.shiftLeft( value, shifter )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) is not Uint64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Let <var>shiftValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(shifter).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>shiftValue</var>).</li>
  <li>Let <var>shiftCount</var> be <var>shiftValue</var> mod 64.</li>
  <li>Return the result of shifting <var>value</var> left by <var>shiftCount</var> bits, masked to 64 bits, tagged as Uint64.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="uint64-shift-right-logical">
<h1><span class="secnum">8.2.8</span>Uint64.shiftRightLogical( value, shifter )</h1>
<emu-alg><ol>
  <li>If <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) is not Uint64, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Let <var>shiftValue</var> be <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-touint32">ToUint32</a>(shifter).</li>
  <li><a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-returnifabrupt">ReturnIfAbrupt</a>(<var>shiftValue</var>).</li>
  <li>Let <var>shiftCount</var> be <var>shiftValue</var> mod 64.</li>
  <li>Return the result of shifting <var>value</var> right by <var>shiftCount</var> bits, with no propagation of the most significant bit, tagged as Uint64.</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="uint64-clz">
<h1><span class="secnum">8.2.9</span>Uint64.clz( value )</h1>
<emu-alg><ol>
  <li>Return the number of leading 0 bits in the 64-bit representation of <var>value</var>.</li>
</ol></emu-alg>
</emu-clause>

</emu-clause>
<emu-clause id="uint64-proto">
<h1><span class="secnum">8.3</span>Properties of the Uint64 Prototype Object</h1>
<emu-clause id="uint64-proto-constructor>
The initial value of `Uint64.prototype.constructor` is the intrinsic object %Uint64%.
</emu-clause>

<emu-clause id=" uint64-prototype-valueof"="">
<h1><span class="secnum">8.3.1</span>Uint64.prototype.valueOf()</h1>
<emu-alg><ol>
  <li>If <emu-const>this</emu-const> does not have a [[Uint64Data]] internal slot, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return <emu-const>this</emu-const>.[[Uint64Data]].</li>
</ol></emu-alg>
</emu-clause>

<emu-clause id="uint64-tolocalestring">
<h1><span class="secnum">8.3.2</span>Uint64.prototype.toLocaleString( [ reserved1 [ , reserved2 ] ])</h1>
<p>
An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement the Int64.prototype.toLocaleString method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of the toLocaleString method is used.
</p>

<p>
Produces a String value that represents this Uint64 value formatted according to the conventions of the host environment’s current locale. This function is implementation-dependent, and it is permissible, but not encouraged, for it to return the same thing as toString.
</p>

<p>
The meanings of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.
</p>

<p>
The length property of the toLocaleString method is 0.
</p>
<emu-note><span class="note">Note</span>ECMA-402 will need an extension to define toLocaleString on Int64 values.</emu-note>
</emu-clause>

<emu-clause id="uint64-prototype-tostring">
<h1><span class="secnum">8.3.3</span>Uint64.prototype.toString()</h1>
<emu-alg><ol>
  <li>If <emu-const>this</emu-const> does not have a [[Uint64Data]] internal slot, throw a <emu-const>TypeError</emu-const>.</li>
  <li>Return <a href="https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tostring">ToString</a>(<emu-const>this</emu-const>.[[Uint64Data]]).</li>
</ol></emu-alg>
</emu-clause>

</emu-clause>
</emu-clause>

<emu-clause id="typedarray-objects">
<h1><span class="secnum">9</span>TypedArray Objects (<a href="http://ecma-international.org/ecma-262/6.0/#sec-typedarray-objects">22.2</a>)</h1>
TypedArrays are provided consisting of Int64 and Uint64 values. Unlike other TypedArrays, elements are 64-bit integers rather than Numbers. The definitions of SetValueInBuffer and GetValueFromBuffer must be modified to account for this difference. The conversion operation on Int64 and Uint64 is to check if the argument is of that particular type, throw a <emu-const>TypeError</emu-const> if not, and accept the value as is if so. DataView methods <code>getInt64</code>, <code>setInt64</code>, <code>getUint64</code>, and <code>setUint64</code> are also provided analogously.
</emu-clause>
</body>